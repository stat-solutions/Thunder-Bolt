<div
  class="container-fluid d-flex flex-row justify-content-center mb-0 mt-2 pt-1 pb-0 shadow-lg col-xs-12 col-lg-10"
>
  <div class="jumbotron-fluid mb-0 pb-0">
    <div class="container mt-0 mx-0 shadow-lg">
      <div class="row">
        <div class="col-12">
          <h3
            class="rub-head4 text-info text-center font-weight-bold pt-0 py-1"
          >
            Personal Info
          </h3>
        </div>
      </div>
    </div>
    <div class="card-body mt-1 pt-4 mb-0 pb-3 pb-md-1 shadow-lg">
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="customer_name"
                [ngClass]="fval.customer_name.valid ? 'text-info' : ''"
                >Client Name<i
                  *ngIf="fval.customer_name.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-user-alt text-primary mx-auto"
                      style="size: 50px"
                    >
                    </i>
                  </div>
                </div>
                <input
                  type="text"
                  formControlName="customer_name"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.customer_name.touched ||
                        fval.customer_name.dirty) &&
                      fval.customer_name.errors
                  }"
                  autocomplete="off"
                  placeholder="Enter Customer Name"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.customer_name.touched || fval.customer_name.dirty) &&
                  fval.customer_name.errors?.required
                "
              >
                The client name is required!
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="homeDetails"
                [ngClass]="fval.homeDetails.valid ? 'text-info' : ''"
                >Home Details<i
                  *ngIf="fval.homeDetails.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-location-arrow text-primary mx-auto"
                      style="size: 50px"
                    >
                    </i>
                  </div>
                </div>
                <input
                  type="text"
                  formControlName="homeDetails"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.homeDetails.touched || fval.homeDetails.dirty) &&
                      fval.homeDetails.errors
                  }"
                  autocomplete="off"
                  placeholder="Enter Home Details"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.homeDetails.touched || fval.homeDetails.dirty) &&
                  fval.homeDetails.errors?.required
                "
              >
                The home details are required!
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="main_contact_number1"
                [ngClass]="fval.main_contact_number1.valid ? 'text-info' : ''"
                >Phone Number 1<i
                  *ngIf="fval.main_contact_number1.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-phone text-primary mx-auto"
                      style="size: 50px"
                    ></i>
                  </div>
                </div>
                <input
                  id="main_contact_number1"
                  formControlName="main_contact_number1"
                  type="text"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.main_contact_number1.touched ||
                        fval.main_contact_number1.dirty) &&
                      fval.main_contact_number1.errors
                  }"
                  placeholder="e.g. 07XXXXXXXX"
                  autocomplete="off"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.main_contact_number1.touched ||
                    fval.main_contact_number1.dirty) &&
                  fval.main_contact_number1.errors?.required
                "
              >
                The phone number is required!
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.main_contact_number1.touched ||
                    fval.main_contact_number1.dirty) &&
                  fval.main_contact_number1.errors?.hasNumber
                "
              >
                The phone number should be equal to 10 "digits"!
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="main_contact_number2"
                [ngClass]="fval.main_contact_number2.valid ? 'text-info' : ''"
                >Phone Number 2<i
                  *ngIf="fval.main_contact_number2.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-phone text-primary mx-auto"
                      style="size: 50px"
                    ></i>
                  </div>
                </div>
                <input
                  id="main_contact_number2"
                  formControlName="main_contact_number2"
                  type="text"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.main_contact_number2.touched ||
                        fval.main_contact_number2.dirty) &&
                      fval.main_contact_number2.errors
                  }"
                  placeholder="e.g. 07XXXXXXXX (Optional)"
                  autocomplete="off"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.main_contact_number2.touched ||
                    fval.main_contact_number2.dirty) &&
                  fval.main_contact_number2.errors?.hasNumber
                "
              >
                The phone number should be equal to 10 "digits"!
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="id_type"
                [ngClass]="fval.id_type.valid ? 'text-info' : ''"
                ><i *ngIf="fval.id_type.valid" class="material-icons"
                  >check_circle</i
                >ID Type</label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-user-tag text-primary mx-auto"
                      style="size: 50px"
                    >
                    </i>
                  </div>
                </div>
                <select
                  formControlName="id_type"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.id_type.touched || fval.id_type.dirty) &&
                      fval.id_type.errors
                  }"
                  autocomplete="off"
                  placeholder="Select the ID type"
                >
                  <option>National ID</option>
                  <option>Passport Number</option>
                  <option>Driving Permit</option>
                  <option>Village ID</option>
                </select>
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.id_type.touched || fval.id_type.dirty) &&
                  fval.id_type.errors?.required
                "
              >
                The ID type is required!
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="id_number"
                [ngClass]="fval.id_number.valid ? 'text-info' : ''"
                >ID Number<i *ngIf="fval.id_number.valid" class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-tag text-primary mx-auto"
                      style="size: 50px"
                    ></i>
                  </div>
                </div>
                <input
                  id="id_number"
                  formControlName="id_number"
                  type="text"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.id_number.touched || fval.id_number.dirty) &&
                      fval.id_number.errors
                  }"
                  placeholder="Enter your ID number"
                  autocomplete="off"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.id_number.touched || fval.id_number.dirty) &&
                  fval.id_number.errors?.required
                "
              >
                The ID number is required!
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.id_number.touched || fval.id_number.dirty) &&
                  fval.id_number.errors?.nationalIdCheck
                "
              >
                Please enter valid ID number!
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="secretPin"
                [ngClass]="fval.secretPin.valid ? 'text-info' : ''"
                >Secret Pin<i
                  *ngIf="fval.secretPin.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >

              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-lock text-primary mx-auto"
                      style="size: 50px"
                    ></i>
                  </div>
                </div>
                <input
                  id="secretPin"
                  formControlName="secretPin"
                  [type]="fieldType ? 'text' : 'password'"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.secretPin.touched || fval.secretPin.dirty) &&
                      fval.secretPin.errors
                  }"
                  placeholder="Enter your Secret Pin"
                  autocomplete="off"
                />
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i
                      class="fas"
                      [ngClass]="{
                        'fa-eye-slash': !fieldType,
                        'fa-eye': fieldType
                      }"
                      (click)="toggleFieldType()"
                    ></i>
                  </span>
                </div>
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.secretPin.touched || fval.secretPin.dirty) &&
                  fval.secretPin.errors?.required
                "
              >
                Secret Pin is required!
              </div>

              <div
                class="col"
                *ngIf="
                  (fval.secretPin.touched || fval.secretPin.dirty) &&
                  fval.secretPin.invalid
                "
                [ngClass]="
                  fval.secretPin.errors?.required ||
                  fval.secretPin.errors?.minlength ||
                  fval.secretPin.errors?.maxlength
                    ? 'text-danger'
                    : 'text-info'
                "
              >
                <i class="material-icons">{{
                  fval.secretPin.errors?.required ||
                  fval.secretPin.errors?.minlength ||
                  fval.secretPin.errors?.maxlength
                    ? "cancel"
                    : "check_circle"
                }}</i>
                Secret Pin should have exactly four digits!
              </div>
              <div
                class="col"
                *ngIf="
                  (fval.secretPin.touched || fval.secretPin.dirty) &&
                  fval.secretPin.invalid
                "
                [ngClass]="
                  fval.secretPin.hasError('required') ||
                  fval.secretPin.hasError('hasNumber')
                    ? 'text-danger'
                    : 'text-info'
                "
              >
                <i class="material-icons">{{
                  fval.secretPin.hasError("required") ||
                  fval.secretPin.hasError("hasNumber")
                    ? "cancel"
                    : "check_circle"
                }}</i>
                Only digits are allowed!
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="clientPhotoUrl"
                [ngClass]="fval.clientPhotoUrl.valid ? 'text-info' : ''"
                >Photo<i
                  *ngIf="fval.clientPhotoUrl.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-image text-primary mx-auto"
                      style="size: 50px"
                    ></i>
                  </div>
                </div>
                <input
                  id="clientPhotoUrl"
                  formControlName="clientPhotoUrl"
                  type="file"
                  src="image/*"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.clientPhotoUrl.touched ||
                        fval.clientPhotoUrl.dirty) &&
                      fval.clientPhotoUrl.errors
                  }"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.clientPhotoUrl.touched || fval.clientPhotoUrl.dirty) &&
                  fval.clientPhotoUrl.errors?.required
                "
              >
                Please upload a passport-size photo of the client!
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <label
                for="idPhotoUrl"
                [ngClass]="fval.idPhotoUrl.valid ? 'text-info' : ''"
                >ID Upload<i
                  *ngIf="fval.idPhotoUrl.valid"
                  class="material-icons"
                  >check_circle</i
                ></label
              >
              <div class="input-group mb-0">
                <div class="input-group-prepend">
                  <div class="input-group-text">
                    <i
                      class="fas fa-image text-primary mx-auto"
                      style="size: 50px"
                    ></i>
                  </div>
                </div>
                <input
                  id="idPhotoUrl"
                  formControlName="idPhotoUrl"
                  type="file"
                  src="image/*"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.idPhotoUrl.touched ||
                        fval.idPhotoUrl.dirty) &&
                      fval.idPhotoUrl.errors
                  }"
                />
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.idPhotoUrl.touched || fval.idPhotoUrl.dirty) &&
                  fval.idPhotoUrl.errors?.required
                "
              >
                Please upload a photo of the client's ID'!
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6">
            <div class="form-group text-primary">
              <div class="input-group mb-0">
                <textarea
                  id="clientComment"
                  formControlName="clientComment"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      (fval.clientComment.touched ||
                        fval.clientComment.dirty) &&
                      fval.clientComment.errors
                  }"
                  placeholder="Client comment"
                ></textarea>
              </div>
              <div
                class="text-danger col"
                *ngIf="
                  (fval.clientComment.touched || fval.clientComment.dirty) &&
                  fval.clientComment.errors?.required
                "
              >
                Comment on the client is required!
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex mt-2 mb-2 pt-0 pb-1 pb-md-0 mx-auto">
          <button
            type="submit"
            class="btn btn-info col-5 col-md-3 mx-auto"
            [disabled]="!userForm.valid"
          >
            Next
          </button>

          <ngx-spinner class="bg-info" size="medium" type="ball-scale-multiple">
            <p class="text-light">Please wait...</p>
          </ngx-spinner>

          <label class="col" *ngIf="errored" class="text-danger">
            <i class="material-icons">Cancel</i>

            <ngx-alerts></ngx-alerts>
          </label>

          <label class="col" *ngIf="posted" class="text-info">
            <i class="material-icons">check_circle</i>
            <ngx-alerts></ngx-alerts>
          </label>

          <button
            type="button"
            class="btn btn-info col-5 col-md-3 mx-auto"
            (click)="resetStageNames()"
          >
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
