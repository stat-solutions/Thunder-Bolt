<div class="container-fluid d-flex flex-row justify-content-center mb-0 mt-md-1 pt-md-0 pt-0 pb-3 shadow-lg col-xs-12 col-lg-8">
    <div class="jumbotron-fluid mx-0 px-0 mb-0 pb-1">
        <div class="container mt-3 mx-0 shadow-lg">
            <div class="row">
                <div class="col-12">
                    <h2 class="rub-head4 text-info text-center font-weight-bold pt-0 py-1">
                        Business Unit Setup
                    </h2>
                </div>
            </div>
        </div>
      </div>
    </div>
    <div class="invest-card card-body mt-2 pt-3 mb-3 mx-auto pb-4 shadow-lg">
      <form [formGroup]="unitForm">
        <div class="row">
          <div class="col-12 col-md-12">
            <div class="form-group text-secondary">
              <div class="input-group mb-0">
                <input
                  id="bussinessUnitName"
                  formControlName="bussinessUnitName"
                  type="text"
                  class="form-control"
                  placeholder="Enter name to create unit"
                  autocomplete="off"
                  [ngClass]="{
                    'is-invalid':
                      (fval.bussinessUnitName.touched 
                      || fval.bussinessUnitName.dirty) &&
                      fval.bussinessUnitName.errors
                  }"
                />
                &nbsp;
                <button type="button" class="btn btn-info col-5 mx-auto"
                (click)= "createUnit()"
                >
                  Create
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="item-header">
          <div class="row" >
            <div class="col-7">
              <h4 class="text-center text-info">Unit</h4>
            </div>
            <div class="col-5">
              <h4 class="text-center text-info">Action</h4>
            </div>
          </div>
        </div>
        <div class="mt-1" 
        formArrayName= "bussinessUnits"
        >
        <div class="item-container" 
        *ngFor="let units of fval.bussinessUnits['controls'];let i = index"
            >
          <div
            class="list-card card mt-2 pt-2 mb-0 mx-auto px-0 pb-0 shadow-lg" [formGroupName]="i" 
          >
            <div class="card-body mt-0 pt-2 mb-0 pb-0 mx-0" >
              <div class="row mt-0 pt-0 mb-0 pb-0" >
                <div class="col-7 mr-0 pr-0">
                  <div class="form-group text-primary">
                    <input
                      type="text"
                      formControlName = 'unitName'
                      class="form-control level-control"
                      autocomplete="off"
                      [ngClass]="{
                        'is-invalid':
                          (fval.bussinessUnits['controls'][i]['controls']['unitName'].touched 
                          || fval.bussinessUnits['controls'][i]['controls']['unitName'].dirty) &&
                          fval.bussinessUnits['controls'][i]['controls']['unitName'].errors
                      }"
                    />
                  </div>
                </div>
                <div class="col-5 ml-2 pl-3 mx-auto pr-0">
                  <button
                    class="btn-sm btn-infob col-3 ml-3 py-1 px-2"
                    (click)= "editUnit(i)"
                  >
                    <i class="fas fa-edit"></i>
                  </button>
                  &nbsp;
                  <button
                    class="btn-sm btn-infob col-3 mr-3 py-1 px-2"
                    [disabled] = "fval.bussinessUnits['controls'][i].pristine || fval.bussinessUnits['controls'][i].invalid"
                    (click)="saveUnit(i)"
                  >
                    <i class="fas fa-save"></i>
                  </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
<!--footer -->
<div class="d-flex justify-content-center col-xs-12 col-lg-12 mt-3 mx-auto">
    <div class="small text-center text-info">&copy; 2020 - ThunderBolt</div>
</div>
<!--/ footer -->
